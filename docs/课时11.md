# 添加 stylelint

本章概要

- <a href="#11_1">配置 stylelint standard 插件</a>
- <a href="#11_2">配置 stylelint 插件</a>
- <a href="#11_3">代码提交检查</a>
- <a href="#11_4">抽离 cwd 层，职能单一化</a>

### <a name="11_1">配置 stylelint standard 插件</a>

使用 stylelint-config-standard 插件

.stylelintrc.js

```js
module.exports = {
  root: true,
  extends: 'stylelint-config-standard'
}
```

### <a name="11_2">配置 stylelint 插件</a>

```js
module.exports = ({ config, options: { stylelint: { lintOnSave = false, extensions } = {} }, api }) => {
  const StyleLintPlugin = require('stylelint-webpack-plugin')
  const CodeframeFormatter = require('stylelint-codeframe-formatter')
  const stylelint = []
  return () => {
    config
      .plugin('stylelint')
      .use(StyleLintPlugin, [Object.assign({
        failOnError: lintOnSave === 'error',
        files: ['src/**/*.{vue,htm,html,css,sss,less,scss}'],
        formatter: CodeframeFormatter
      }, stylelint)])
  }
}
```

### <a name="11_3">代码提交检查</a>

```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.{vue,htm,html,css,sss,less,scss}": [
      "webpack-box lint stylelint",
      "git add"
    ],
    "*.{js,jsx}": [
      "webpack-box lint eslint",
      "git add"
    ]
  }
}
```